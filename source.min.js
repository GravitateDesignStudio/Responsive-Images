/**
 * Responsive Images
 * Version: 4.3.1
 * Author: Geoff Gedde
 * license: http://www.opensource.org/licenses/mit-license.php
 */
!function(e){e.fn.responsiveImages=function(a){function i(){m=e(window).scrollTop(),u=e(window).height()}function t(e){var a=m+u,i=parseFloat(e.offset().top);return i-c.lazyload_threshold<=a}function o(){l=e("[data-rimg-small], [data-rimg-medium], [data-rimg-large]").addClass("rimg"),c.lazyload&&(i(),l.each(function(a){var i=e(this);if(c.forcetagwidth&&"IMG"===i.prop("tagName")&&i.css("width","100%"),!t(i)){var o=i.attr("src"),n=i.css("background-image").split('url("').join("").split('")').join("");(!o||o.indexOf("data:")>-1)&&(!n||"none"==n||n.indexOf("data:")>-1)&&i.addClass("rimg-lazy")}}))}function n(e,a,i){for(var t in c.sizes)if(t>i&&e===a.attr("data-rimg-"+c.sizes[t].name))return!0;return!1}function r(){var a,i=e(window).width();l.each(function(o){var r=e(this),s=r.outerWidth(),d=s>0&&"tag"===c.watch?s:i,l=!0,m="undefined"!=typeof window.devicePixelRatio&&e.isNumeric(window.devicePixelRatio)&&window.devicePixelRatio>1;c.retna&&m&&(d*=window.devicePixelRatio);var u,g=r.attr("src"),w=r.css("background-image").split('url("').join("").split('")').join("");if(!c.lazyload||f||r.hasClass("rimg-loaded")||(l=t(r)),l)for(a in c.sizes)if(d>0&&d<c.sizes[a].size){for(var z=c.downscale?a-1:a;z>=0;z--)if(u=r.attr("data-rimg-"+c.sizes[z].name),u&&("undefined"==typeof c.sizes[z].retnaonly||!c.sizes[z].retnaonly||c.retna&&m&&c.sizes[z].retnaonly)){"IMG"===r.prop("tagName")?g==u||!c.downsize&&(c.downsize||n(g,r,z))||(r.hasClass("rimg-loaded")?r.attr("src",u):r.attr("src",u).one("load",function(){e(this).addClass("rimg-loaded")})):w==u||!c.downsize&&(c.downsize||n(w,r,z))||e("<img/>").attr("src",u).one("load",function(){e(this).remove(),r.css("background-image","url('"+u+"')").addClass("rimg-loaded")});break}break}})}var s,d,l,c=e.extend({watch:"tag",throttle:100,downscale:!1,downsize:!1,onload:!0,lazyload:!0,forcetagwidth:!0,retna:!1,lazyload_threshold:100,sizes:[{name:"small",size:320},{name:"medium",size:500},{name:"medium_large",size:768},{name:"large",size:1024},{name:"xlarge",size:1440},{name:"large_x2",size:2048,retnaonly:!0},{name:"xlarge_x2",size:2880,retnaonly:!0},{name:"full",size:99999}]},a),m=0,u=0,f=!1,g=-1;o(),e(window).on("resize",function(){return c.lazyload&&i(),c.throttle?(clearTimeout(s),void(s=setTimeout(r,c.throttle))):void r()}),c.lazyload&&(i(),e(window).on("scroll",function(){if(m=e(window).scrollTop(),!f&&m>g){if(g=m,m+u>=e(document).height()&&(f=!0),c.throttle)return clearTimeout(d),void(d=setTimeout(r,10));r()}})),c.onload&&setTimeout(function(){r()},0)}}(jQuery);
