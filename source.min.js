/**
 * Responsive Images
 * Version: 4.0.0
 * Author: Geoff Gedde
 * license: http://www.opensource.org/licenses/mit-license.php
 */
!function(a){a.fn.responsiveImages=function(i){function e(){u=a(window).scrollTop(),c=a(window).height()}function t(a){var i=u+c,e=parseFloat(a.offset().top);return i>=e-100}function n(){l=a("[data-rimg-small], [data-rimg-medium], [data-rimg-large]").addClass("rimg"),m.lazyload&&(e(),l.each(function(i){var e=a(this);if(!t(e)){var n=e.attr("src"),r=e.css("background-image").split('url("').join("").split('")').join("");(!n||n.indexOf("data:")>-1)&&(!r||"none"==r||r.indexOf("data:")>-1)&&e.addClass("rimg-lazy")}}))}function r(a,i,e){for(var t in m.sizes)if(t>e&&a===i.attr("data-rimg-"+m.sizes[t].name))return!0;return!1}function o(){var i,e=a(window).width();l.each(function(n){var o=a(this),s=o.outerWidth(),d=s>0?s:e,l=!0,u=o.attr("src"),c=o.css("background-image").split('url("').join("").split('")').join("");if(m.lazyload&&!z&&(l=t(o)),l)for(i in m.sizes)if(d>0&&d<m.sizes[i].size){for(var f=m.downscale?i-1:i;f>=0;f--)if(o.attr("data-rimg-"+m.sizes[f].name)){"IMG"===o.prop("tagName")?u==o.attr("data-rimg-"+m.sizes[f].name)||!m.downsize&&(m.downsize||r(u,o,f))||o.attr("src",o.attr("data-rimg-"+m.sizes[f].name)).addClass("rimg-loaded"):c==o.attr("data-rimg-"+m.sizes[f].name)||!m.downsize&&(m.downsize||r(c,o,f))||o.css("background-image","url('"+o.attr("data-rimg-"+m.sizes[f].name)+"')").addClass("rimg-loaded");break}break}})}var s,d,l,m=a.extend({throttle:100,downscale:!1,downsize:!1,onload:!0,lazyload:!0,sizes:[{name:"small",size:320},{name:"medium",size:500},{name:"medium_large",size:768},{name:"large",size:1024},{name:"xlarge",size:1440},{name:"full",size:99999}]},i),u=0,c=0,z=!1,f=-1;n(),a(window).on("resize",function(){return m.lazyload&&e(),m.throttle?(clearTimeout(s),void(s=setTimeout(o,m.throttle))):void o()}),m.lazyload&&(e(),a(window).on("scroll",function(){if(u=a(window).scrollTop(),!z&&u>f){if(f=u,u+c>=a(document).height()&&(z=!0),m.throttle)return clearTimeout(d),void(d=setTimeout(o,10));o()}})),m.onload&&o()}}(jQuery);
