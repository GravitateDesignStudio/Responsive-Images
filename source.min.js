/**
 * Responsive Images
 * Version: 4.3.0
 * Author: Geoff Gedde
 * license: http://www.opensource.org/licenses/mit-license.php
 */
!function(i){i.fn.responsiveImages=function(a){function e(){m=i(window).scrollTop(),u=i(window).height()}function o(i){var a=m+u,e=parseFloat(i.offset().top);return e-c.lazyload_threshold<=a}function t(){l=i("[data-rimg-small], [data-rimg-medium], [data-rimg-large]").addClass("rimg"),c.lazyload&&(e(),l.each(function(a){var e=i(this);if(c.forcetagwidth&&"IMG"===e.prop("tagName")&&e.css("width","100%"),!o(e)){var t=e.attr("src"),n=e.css("background-image").split('url("').join("").split('")').join("");(!t||t.indexOf("data:")>-1)&&(!n||"none"==n||n.indexOf("data:")>-1)&&e.addClass("rimg-lazy")}}))}function n(i,a,e){for(var o in c.sizes)if(o>e&&i===a.attr("data-rimg-"+c.sizes[o].name))return!0;return!1}function r(){var a,e=i(window).width();l.each(function(t){var r=i(this),s=r.outerWidth(),d=s>0&&"tag"===c.watch?s:e,l=!0;c.retna&&"undefined"!=typeof window.devicePixelRatio&&i.isNumeric(window.devicePixelRatio)&&window.devicePixelRatio>1&&(d*=window.devicePixelRatio);var m,u=r.attr("src"),w=r.css("background-image").split('url("').join("").split('")').join("");if(!c.lazyload||f||r.hasClass("rimg-loaded")||(l=o(r)),l)for(a in c.sizes)if(d>0&&d<c.sizes[a].size){for(var g=c.downscale?a-1:a;g>=0;g--)if(m=r.attr("data-rimg-"+c.sizes[g].name)){"IMG"===r.prop("tagName")?u==m||!c.downsize&&(c.downsize||n(u,r,g))||(r.hasClass("rimg-loaded")?r.attr("src",m):r.attr("src",m).one("load",function(){i(this).addClass("rimg-loaded")})):w==m||!c.downsize&&(c.downsize||n(w,r,g))||i("<img/>").attr("src",m).one("load",function(){i(this).remove(),r.css("background-image","url('"+m+"')").addClass("rimg-loaded")});break}break}})}var s,d,l,c=i.extend({watch:"tag",throttle:100,downscale:!1,downsize:!1,onload:!0,lazyload:!0,forcetagwidth:!0,retna:!0,lazyload_threshold:100,sizes:[{name:"small",size:320},{name:"medium",size:500},{name:"medium_large",size:768},{name:"large",size:1024},{name:"xlarge",size:1440},{name:"full",size:99999}]},a),m=0,u=0,f=!1,w=-1;t(),i(window).on("resize",function(){return c.lazyload&&e(),c.throttle?(clearTimeout(s),void(s=setTimeout(r,c.throttle))):void r()}),c.lazyload&&(e(),i(window).on("scroll",function(){if(m=i(window).scrollTop(),!f&&m>w){if(w=m,m+u>=i(document).height()&&(f=!0),c.throttle)return clearTimeout(d),void(d=setTimeout(r,10));r()}})),c.onload&&setTimeout(function(){r()},0)}}(jQuery);
